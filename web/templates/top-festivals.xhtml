<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <body>
        <ui:composition>             
            <c:if test="#{appAuthorization.admin}">
                <br/>
                <h:outputText class="header" value="5 Most seen festivals"/> <br/>
                <p:dataTable id="tableTopSeen" var="festival" value="#{festivalList.topFiveSeenAdmin}" >
                    <p:column headerText="Title">
                        <h:outputText value="#{festival.title}" />
                    </p:column>
                    <p:column headerText="Place">
                        <h:outputText value="#{festival.place}" />
                    </p:column>
                    <p:column headerText="Begin Date">
                        <h:outputText value="#{festival.beginDate}" >
                            <f:convertDateTime pattern="dd.MM.yy" dateStyle="medium"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="End Date">
                        <h:outputText value="#{festival.endDate}" >
                            <f:convertDateTime pattern="dd.MM.yy" dateStyle="medium"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Times Seen">
                        <h:outputText value="#{festival.timesSeen}" />
                    </p:column>

                </p:dataTable><br/>
                <h:outputText class="header" value="5 Most sold tickets"/> <br/>
                <p:dataTable id="tableMostSold" var="festival" value="#{festivalList.topFiveTicketSoldAdmin}" >
                    <p:column headerText="Title">
                        <h:outputText value="#{festival.title}" />
                    </p:column>
                    <p:column headerText="Place">
                        <h:outputText value="#{festival.place}" />
                    </p:column>
                    <p:column headerText="Begin Date">
                        <h:outputText value="#{festival.beginDate}" >
                            <f:convertDateTime pattern="dd.MM.yy" dateStyle="medium"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="End Date">
                        <h:outputText value="#{festival.endDate}" >
                            <f:convertDateTime pattern="dd.MM.yy" dateStyle="medium"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Tickets Sold">
                        <h:outputText value="#{festival.ticketsSold}" />
                    </p:column>                    
                </p:dataTable><br/>

            </c:if> 
            <c:if test="#{appAuthorization.member}">
                <h:outputText class="header" value="Upcoming festivals"/> <br/>
                <p:dataTable id="Upcoming" var="festival" value="#{festivalList.lastFiveUpcoming}" >
                    <p:column headerText="Title">
                        <h:outputText value="#{festival.title}" />
                    </p:column>
                    <p:column headerText="Place">
                        <h:outputText value="#{festival.place}" />
                    </p:column>
                    <p:column headerText="Begin Date">
                        <h:outputText value="#{festival.beginDate}" >
                            <f:convertDateTime pattern="dd.MM.yy" dateStyle="medium"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="End Date">
                        <h:outputText value="#{festival.endDate}" >
                            <f:convertDateTime pattern="dd.MM.yy" dateStyle="medium"/>
                        </h:outputText>
                    </p:column>                                   
                </p:dataTable><br/>
            </c:if>
            <c:if test="#{appAuthorization.anonymous}">
                <p:outputLabel value="Why so guest?" style="background-color: #bedbed"/>
            </c:if>
        </ui:composition>	
    </body>
</html>